<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Galactic Compute Node</title>
    <style>
        :root { --neon: #00d2ff; --dark: #050505; }
        body { background: var(--dark); color: #aaa; font-family: 'Inter', sans-serif; display: flex; justify-content: center; padding: 20px; }
        .dashboard { background: #111; border: 1px solid #222; width: 100%; max-width: 900px; padding: 40px; border-radius: 12px; box-shadow: 0 30px 60px rgba(0,0,0,0.8); }
        h1 { color: var(--neon); text-align: left; font-weight: 700; border-bottom: 2px solid #222; padding-bottom: 20px; margin-bottom: 30px; }
        .stat-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #000; padding: 20px; border-radius: 8px; border: 1px solid #1a1a1a; text-align: center; }
        .stat-num { display: block; color: var(--neon); font-size: 2em; font-weight: bold; }
        .input-group { margin-bottom: 20px; }
        input { width: 100%; padding: 15px; background: #0a0a0a; border: 1px solid #333; color: white; border-radius: 6px; }
        .btn-action { width: 100%; padding: 18px; background: var(--neon); color: #000; border: none; cursor: pointer; font-weight: bold; border-radius: 6px; transition: 0.2s; text-transform: uppercase; }
        .btn-action:hover { opacity: 0.8; transform: translateY(-2px); }
        #system-logs { height: 150px; background: #000; border: 1px solid #222; border-radius: 6px; padding: 15px; font-family: monospace; font-size: 13px; overflow-y: auto; color: #555; }
    </style>
</head>
<body>

<div class="dashboard">
    <h1>COMPUTE NODE v4.0</h1>

    <div class="stat-grid">
        <div class="stat-card">Network Power<span class="stat-num" id="power">0.00</span></div>
        <div class="stat-card">Asset Units<span class="stat-num" id="units">0</span></div>
        <div class="stat-card">Node Status<span class="stat-num" style="font-size: 1.2em; color: #ff9800;" id="status">OFFLINE</span></div>
    </div>

    <div class="input-group">
        <label>Destination Identity (Address)</label>
        <input type="text" id="dest" placeholder="Enter Public Key ID...">
    </div>

    <button class="btn-action" id="mainBtn" onclick="toggleCompute()">Initiate Compute Cycle</button>

    <h3 style="margin-top:40px; color: #444;">System Telemetry</h3>
    <div id="system-logs">READY FOR DEPLOYMENT...</div>
</div>

<script id="logic-worker" type="javascript/worker">
    self.onmessage = async function(e) {
        const { key, diff } = e.data;
        let iter = 0;
        async function solve(val) {
            const b = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(val));
            return Array.from(new Uint8Array(b)).map(x => x.toString(16).padStart(2,'0')).join('');
        }
        while(true) {
            iter++;
            const res = await solve(key + iter);
            if(res.startsWith('0'.repeat(diff))) self.postMessage({ type: 'FOUND', iter });
            if(iter % 5000 === 0) self.postMessage({ type: 'TICK' });
        }
    };
</script>

<script>
    let active = false; let worker; let total = 0; let start;
    function log(m) { const l = document.getElementById('system-logs'); l.innerHTML += `<div>[${new Date().toLocaleTimeString()}] > ${m}</div>`; l.scrollTop = l.scrollHeight; }

    function toggleCompute() {
        const dest = document.getElementById('dest').value;
        const btn = document.getElementById('mainBtn');
        if(!dest) return alert("Missing ID");

        if(!active) {
            active = true; start = Date.now();
            btn.innerText = "Terminate Cycle"; btn.style.background = "#ff4444";
            document.getElementById('status').innerText = "ACTIVE"; document.getElementById('status').style.color = "#00ff41";
            
            const b = new Blob([document.getElementById('logic-worker').textContent], {type: 'text/javascript'});
            worker = new Worker(window.URL.createObjectURL(b));
            worker.onmessage = (e) => {
                if(e.data.type === 'FOUND') {
                    document.getElementById('units').innerText = parseInt(document.getElementById('units').innerText) + 1;
                    log("VALID BLOCK PROCESSED VIA NODE");
                } else {
                    total += 5000;
                    document.getElementById('power').innerText = (total / ((Date.now() - start)/1000)).toFixed(0);
                }
            };
            worker.postMessage({ key: dest, diff: 4 });
            log("Computing engine successfully engaged.");
        } else {
            active = false; worker.terminate();
            btn.innerText = "Initiate Compute Cycle"; btn.style.background = "#00d2ff";
            document.getElementById('status').innerText = "OFFLINE"; document.getElementById('status').style.color = "#ff9800";
            log("Computing engine safely detached.");
        }
    }
</script>

</body>
</html>
