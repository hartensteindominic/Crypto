<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Crypto Rocket Fleet â€“ Launch & Stake</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <style>
    body {
      margin:0; overflow:hidden; background:#000; color:#0ff; font-family:'Segoe UI',sans-serif;
    }
    #bgCanvas { position:fixed; inset:0; z-index:1; pointer-events:none; }
    header {
      background:linear-gradient(135deg,#001122,#003366,#0066cc); padding:60px 20px; text-align:center; position:relative; z-index:10;
      box-shadow:0 0 60px #00aaff inset;
    }
    h1 {
      font-size:4.2rem; margin:0; text-shadow:0 0 40px #00ffff, 0 0 80px #ff00aa;
      background:linear-gradient(90deg,#00ffff,#ff00aa,#ffff00,#00ff88); -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    .glow { text-shadow:0 0 20px currentColor; }
    .container-fluid { position:relative; z-index:10; max-width:1100px; margin:30px auto; padding:20px; background:rgba(0,0,20,0.7); border-radius:24px; border:2px solid #00aaff; backdrop-filter:blur(12px); box-shadow:0 0 60px #00aaff; }
    .btn-launch {
      padding:18px 60px; font-size:1.6rem; background:linear-gradient(45deg,#ff4500,#ff8c00,#ffaa00); border:none; border-radius:60px; color:white;
      box-shadow:0 0 40px #ff4500, inset 0 0 20px #ff8800; transition:all .4s;
    }
    .btn-launch:hover:not(:disabled) { transform:scale(1.12) rotate(2deg); box-shadow:0 0 80px #ff5500; }
    .btn-stake { background:linear-gradient(45deg,#00ff9d,#00b4db); color:#000; font-weight:bold; box-shadow:0 0 30px #00ff9d; }
    #rocket { position:absolute; bottom:40px; left:50%; transform:translateX(-50%) scale(1.4); font-size:6rem; z-index:20; display:none; filter:drop-shadow(0 0 30px #ff8800); }
    .launching { animation:rocketAscend 5s cubic-bezier(.25,.1,.25,1) forwards; }
    @keyframes rocketAscend {
      0%   { bottom:40px; transform:translateX(-50%) scale(1.4) rotate(0deg); }
      30%  { bottom:35%; transform:translateX(-50%) scale(1.6) rotate(4deg); }
      70%  { bottom:75%; transform:translateX(-50%) scale(1.8) rotate(-3deg); }
      100% { bottom:130%; opacity:0; transform:translateX(-50%) scale(2.5) rotate(0deg); }
    }
    #status { min-height:120px; font-size:1.5rem; text-align:center; margin:30px 0; font-weight:600; }
    .success { color:#0f0; text-shadow:0 0 25px #0f0,0 0 50px #0f0; }
    .fail    { color:#f44; text-shadow:0 0 25px #f44; }
    .stake-card { background:rgba(0,40,80,0.6); border:1px solid #00ffff; border-radius:16px; padding:20px; margin:15px; backdrop-filter:blur(8px); transition:all .3s; }
    .stake-card:hover { transform:translateY(-8px); box-shadow:0 20px 50px #00aaff; }
    footer { text-align:center; padding:30px; background:rgba(0,0,0,0.8); z-index:10; position:relative; }
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>
  <div id="rocket">ðŸš€</div>

  <header class="glow">
    <h1>Crypto Rocket Fleet</h1>
    <p class="lead">Launch â†’ Stake â†’ Dominate the Stars</p>
  </header>

  <div class="container-fluid">
    <div class="row text-center mb-5">
      <div class="col-md-4"><div class="stake-card"><i class="fas fa-rocket fa-4x mb-3" style="color:#ff5500"></i><h4>Hyper Launch</h4><p>Instant neon blast-off with trail & shockwave</p></div></div>
      <div class="col-md-4"><div class="stake-card"><i class="fas fa-layer-group fa-4x mb-3" style="color:#00ff9d"></i><h4>Stake & Earn</h4><p>Lock fuel â†’ Earn Star Points â†’ Boost launches</p></div></div>
      <div class="col-md-4"><div class="stake-card"><i class="fas fa-star fa-4x mb-3" style="color:#ffff00"></i><h4>Cosmic Effects</h4><p>Particles, glows, aurora, explosions, flares</p></div></div>
    </div>

    <div class="text-center my-5 position-relative" id="launchArea">
      <h3 class="glow mb-4">ðŸ”¥ FUEL & LAUNCH ðŸ”¥</h3>
      <p>0.001 â€“ 0.1 ETH per launch â€¢ Stake to increase success chance!</p>

      <button id="connect" class="btn btn-lg btn-info mb-3 px-5">Connect Wallet</button>
      <div id="wallet-info" class="mb-4 fs-5"></div>

      <input type="number" id="fuel" class="form-control form-control-lg mb-4 bg-dark text-light border-info text-center" placeholder="0.001 â€“ 0.1 ETH" step="0.001" min="0.001" max="0.1"/>

      <button id="launch" class="btn-launch" disabled>LAUNCH ROCKET!</button>

      <div id="status" class="mt-4"></div>
    </div>

    <!-- Real Staking Pool -->
    <div class="row justify-content-center mt-5">
      <div class="col-md-8">
        <div class="stake-card text-center">
          <h4><i class="fas fa-lock fa-lg me-2"></i> Rocket Fuel Staking Pool</h4>
          <p>Stake ETH â†’ Earn rewards over time (pool funded by missions)</p>

          <div class="input-group mb-3">
            <input type="number" id="stakeAmount" class="form-control bg-dark text-light border-info" placeholder="ETH to stake" step="0.001" min="0.001"/>
            <button id="stakeBtn" class="btn btn-success px-4">STAKE ETH</button>
          </div>

          <div class="mb-3">
            <button id="unstakeBtn" class="btn btn-warning px-4" disabled>Unstake All</button>
            <button id="claimRewardsBtn" class="btn btn-info px-4 ms-2" disabled>Claim Rewards</button>
          </div>

          <p id="stakedDisplay" class="fs-5">Your Stake: 0 ETH</p>
          <p id="rewardsDisplay" class="fs-5">Pending Rewards: 0 ETH</p>
          <p id="boostDisplay" class="fs-5">Launch Boost: +0%</p>
        </div>
      </div>
    </div>

    <!-- Fiat fallback -->
    <div class="text-center mt-5">
      <h5>Or Support with Fiat</h5>
      <form action="https://www.paypal.com/donate" method="post" target="_top">
        <input type="hidden" name="hosted_button_id" value="YOUR_PAYPAL_BUTTON_ID_HERE"/>
        <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="Donate with PayPal"/>
      </form>
    </div>
  </div>

  <footer>
    Â© 2026 Dominic â€¢ Powered by Ethereum â€¢ All launches & stakes on-chain
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Canvas Background: Starfield + Nebula + Particles
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });

    const stars = [];
    for (let i = 0; i < 600; i++) {
      stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        size: Math.random() * 2.2 + 0.4,
        speed: Math.random() * 0.9 + 0.2,
        hue: Math.random() * 360
      });
    }

    let particles = [];
    function spawnTrail(x, y, count = 12) {
      for (let i = 0; i < count; i++) {
        particles.push({
          x, y,
          vx: (Math.random() - 0.5) * 12,
          vy: (Math.random() - 0.5) * 12 - 4,
          life: 1.4,
          decay: Math.random() * 0.05 + 0.018,
          size: Math.random() * 5 + 2.5,
          hue: Math.random() * 60 + 10,
          glow: 1
        });
      }
    }

    function animateBg() {
      ctx.fillStyle = 'rgba(0,0,12,0.09)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      const time = Date.now() * 0.0003;
      stars.forEach(s => {
        ctx.globalAlpha = 0.6 + Math.sin(time + s.hue * 0.02) * 0.4;
        ctx.fillStyle = `hsl(${s.hue},80%,${70 + Math.sin(time * 2) * 20}%)`;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
        ctx.fill();
        s.y += s.speed;
        if (s.y > canvas.height) s.y = 0;
      });

      particles = particles.filter(p => {
        ctx.globalAlpha = p.life * p.glow;
        ctx.fillStyle = `hsl(${p.hue},100%,${50 + p.glow * 50}%)`;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
        p.x += p.vx;
        p.y += p.vy;
        p.life -= p.decay;
        p.size *= 0.96;
        p.glow *= 0.94;
        return p.life > 0;
      });
      ctx.globalAlpha = 1;

      requestAnimationFrame(animateBg);
    }
    animateBg();

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Rocket & Launch Logic
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const RECIPIENT = '0x02f93c7547309ca50EEAB446DaEBE8ce8E694cBb';
    const rocket = document.getElementById('rocket');
    const status = document.getElementById('status');
    const launchBtn = document.getElementById('launch');
    const connectBtn = document.getElementById('connect');
    const walletInfo = document.getElementById('wallet-info');
    const fuelInput = document.getElementById('fuel');

    let web3, account;

    connectBtn.onclick = async () => {
      if (!window.ethereum) return alert('MetaMask required!');
      web3 = new Web3(window.ethereum);
      try {
        const acc = await ethereum.request({ method: 'eth_requestAccounts' });
        account = acc[0];
        const chain = await web3.eth.getChainId();
        walletInfo.innerHTML = `Connected: ${account.slice(0,6)}...${account.slice(-4)} ${chain !== 1 ? '<br><span style="color:#ff5500">(Switch to Ethereum Mainnet)</span>' : ''}`;
        launchBtn.disabled = false;
        connectBtn.textContent = 'Fleet Online';
        connectBtn.disabled = true;
        initStaking(); // initialize staking after connect
      } catch (e) {
        walletInfo.innerHTML = `<span style="color:#ff5500">Error: ${e.message}</span>`;
      }
    };

    launchBtn.onclick = async () => {
      const amt = parseFloat(fuelInput.value);
      if (isNaN(amt) || amt < 0.001 || amt > 0.1) {
        return status.innerHTML = '<span style="color:#ff0">Fuel 0.001â€“0.1 ETH only!</span>';
      }

      rocket.style.display = 'block';
      rocket.classList.remove('launching');
      launchBtn.disabled = true;
      status.innerHTML = '<span class="text-warning glow">IGNITION SEQUENCE... 3... 2... 1...</span>';

      try {
        const wei = web3.utils.toWei(fuelInput.value, 'ether');
        const gas = await web3.eth.estimateGas({ from: account, to: RECIPIENT, value: wei });
        const tx = await web3.eth.sendTransaction({ from: account, to: RECIPIENT, value: wei, gas });

        setTimeout(() => {
          rocket.classList.add('launching');
          gsap.to(rocket, {
            duration: 4.5,
            ease: "power2.out",
            onUpdate: () => { spawnTrail(parseFloat(rocket.style.left) || canvas.width/2, parseFloat(rocket.style.bottom) || 40, 12); }
          });
          status.innerHTML = '<span class="text-info glow">HYPERSONIC ASCENT!</span>';
        }, 900);

        setTimeout(() => {
          const success = Math.random() < (0.45 + (amt * 4) + (boost / 100));
          if (success) {
            createExplosion(canvas.width / 2, 120, 120);
            status.innerHTML = `<span class="success glow animate__animated animate__pulse">FLEET ASCENDED! +1 Fuel Token earned!<br>Tx: <a href="https://etherscan.io/tx/${tx.transactionHash}" target="_blank" style="color:#0f0">${tx.transactionHash.slice(0,12)}...</a></span>`;
          } else {
            createExplosion(canvas.width / 2, canvas.height * 0.7, 90);
            status.innerHTML = `<span class="fail glow animate__animated animate__shakeX">CRITICAL FAILURE! More stake = better odds.<br>Tx: <a href="https://etherscan.io/tx/${tx.transactionHash}" target="_blank" style="color:#f44">${tx.transactionHash.slice(0,12)}...</a></span>`;
          }
          setTimeout(() => { rocket.style.display = 'none'; launchBtn.disabled = false; }, 5500);
        }, 5200);

      } catch (e) {
        rocket.style.display = 'none';
        status.innerHTML = `<span style="color:#ff5500">ABORT: ${e.message}</span>`;
        launchBtn.disabled = false;
      }
    };

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Real On-Chain Staking Integration
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const STAKING_ADDRESS = "0xYourDeployedContractAddressHere"; // â† REPLACE AFTER DEPLOY
    const STAKING_ABI = [ /* Paste FULL ABI JSON array from Remix here */ ];

    let stakingContract, boost = 0;

    async function initStaking() {
      if (web3 && account && STAKING_ADDRESS && STAKING_ABI.length > 0) {
        stakingContract = new web3.eth.Contract(STAKING_ABI, STAKING_ADDRESS);
        updateStakingUI();
        setInterval(updateStakingUI, 10000);
      }
    }

    async function updateStakingUI() {
      if (!stakingContract) return;
      try {
        const stakedWei = await stakingContract.methods.balanceOf(account).call();
        const rewardsWei = await stakingContract.methods.earned(account).call();
        const staked = web3.utils.fromWei(stakedWei, 'ether');
        const rewards = web3.utils.fromWei(rewardsWei, 'ether');

        document.getElementById('stakedDisplay').textContent = `Your Stake: ${parseFloat(staked).toFixed(4)} ETH`;
        document.getElementById('rewardsDisplay').textContent = `Pending Rewards: ${parseFloat(rewards).toFixed(6)} ETH`;

        boost = Math.min(50, parseFloat(staked) * 10);
        document.getElementById('boostDisplay').textContent = `Launch Boost: +${boost.toFixed(1)}%`;

        document.getElementById('unstakeBtn').disabled = parseFloat(staked) <= 0;
        document.getElementById('claimRewardsBtn').disabled = parseFloat(rewards) <= 0;
      } catch (err) {
        console.error("Staking UI error:", err);
      }
    }

    document.getElementById('stakeBtn').onclick = async () => {
      const amt = document.getElementById('stakeAmount').value;
      if (!amt || parseFloat(amt) <= 0) return alert("Enter valid amount");
      try {
        const wei = web3.utils.toWei(amt, 'ether');
        await stakingContract.methods.stake().send({ from: account, value: wei });
        alert("Staked successfully!");
        updateStakingUI();
        document.getElementById('stakeAmount').value = '';
      } catch (err) {
        alert("Stake failed: " + (err.reason || err.message));
      }
    };

    document.getElementById('unstakeBtn').onclick = async () => {
      try {
        const stakedWei = await stakingContract.methods.balanceOf(account).call();
        await stakingContract.methods.withdraw(stakedWei).send({ from: account });
        alert("Unstaked all ETH!");
        updateStakingUI();
      } catch (err) {
        alert("Unstake failed: " + (err.reason || err.message));
      }
    };

    document.getElementById('claimRewardsBtn').onclick = async () => {
      try {
        await stakingContract.methods.getReward().send({ from: account });
        alert("Rewards claimed!");
        updateStakingUI();
      } catch (err) {
        alert("Claim failed: " + (err.reason || err.message));
      }
    };
  </script>
</body>
</html>
