<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Rocket Mint</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/index.umd.min.js"></script>
    <style>
        body { background: #050505; color: white; font-family: sans-serif; text-align: center; padding-top: 50px; }
        .box { border: 1px solid #333; padding: 40px; border-radius: 15px; display: inline-block; background: #111; }
        input { padding: 10px; width: 80%; margin: 10px 0; background: #000; border: 1px solid #444; color: #0f0; }
        button { padding: 15px 30px; cursor: pointer; font-weight: bold; border-radius: 5px; border: none; }
        .btn-connect { background: #007bff; color: white; }
        .btn-launch { background: #28a745; color: white; margin-top: 20px; }
        #rocket { font-size: 80px; display: none; margin: 20px; }
        .launching { animation: fly 2s forwards; }
        @keyframes fly { to { transform: translateY(-500px); opacity: 0; } }
        #status { margin-top: 20px; color: #aaa; font-family: monospace; }
    </style>
</head>
<body>

<div class="box">
    <div id="rocket">ðŸš€</div>
    <h2>Rocket Mint</h2>
    
    <button id="connectBtn" class="btn-connect">Connect Wallet</button>
    
    <div id="controls" style="display:none;">
        <p>Amount to Stake (ETH):</p>
        <input type="number" id="ethAmount" value="0.001" step="0.001">
        <br>
        <button id="launchBtn" class="btn-launch">MINT & LAUNCH</button>
    </div>

    <div id="status">Ready.</div>
</div>

<script>
    // FIXED: Checksummed address to stop the "bad address checksum" error
    const MY_ACCOUNT = "0x02F949281A8c9837963C82813589B845C5194Cbb";
    let signer;

    const connectBtn = document.getElementById('connectBtn');
    const controls = document.getElementById('controls');
    const status = document.getElementById('status');
    const rocket = document.getElementById('rocket');

    connectBtn.onclick = async () => {
        if (!window.ethereum) return alert("Please use MetaMask");
        try {
            const provider = new ethers.BrowserProvider(window.ethereum);
            signer = await provider.getSigner();
            const addr = await signer.getAddress();
            
            connectBtn.style.display = 'none';
            controls.style.display = 'block';
            status.innerText = "Wallet: " + addr.slice(0,6) + "...";
        } catch (e) {
            status.innerText = "Connection failed.";
        }
    };

    document.getElementById('launchBtn').onclick = async () => {
        const amt = document.getElementById('ethAmount').value;
        try {
            status.innerText = "Confirming in wallet...";
            
            // Real Transaction
            const tx = await signer.sendTransaction({
                to: MY_ACCOUNT,
                value: ethers.parseEther(amt.toString())
            });

            status.innerText = "Transaction sent! Waiting for block...";
            
            // Only show rocket animation when the blockchain actually accepts the tx
            const receipt = await tx.wait();
            
            rocket.style.display = 'block';
            rocket.classList.add('launching');
            status.innerHTML = `SUCCESS!<br>Block: ${receipt.blockNumber}<br><a href="https://etherscan.io/tx/${tx.hash}" target="_blank" style="color:#0f0">View on Etherscan</a>`;
            
        } catch (e) {
            status.innerText = "Error: " + (e.reason || e.message);
        }
    };
</script>

</body>
</html>
